{"version":3,"file":"rich-value.js","names":["RichValueStore","constructor","relIndexByImageId","Map","rels","values","valueMetadata","addLocalImage","imageId","relIndex","get","undefined","length","push","set","rvIndex","calcOrigin","vmIndex","vm","model","module","exports"],"sources":["../../../lib/doc/rich-value.js"],"sourcesContent":["'use strict';\n\nclass RichValueStore {\n  constructor() {\n    this.relIndexByImageId = new Map();\n    this.rels = [];\n    this.values = [];\n    this.valueMetadata = [];\n  }\n\n  addLocalImage(imageId) {\n    let relIndex = this.relIndexByImageId.get(imageId);\n    if (relIndex === undefined) {\n      relIndex = this.rels.length;\n      this.rels.push({imageId});\n      this.relIndexByImageId.set(imageId, relIndex);\n    }\n\n    const rvIndex = this.values.length;\n    this.values.push({relIndex, calcOrigin: 5});\n\n    const vmIndex = this.valueMetadata.length;\n    this.valueMetadata.push({rvIndex});\n\n    return {vm: vmIndex + 1};\n  }\n\n  get model() {\n    return {\n      rels: this.rels,\n      values: this.values,\n      valueMetadata: this.valueMetadata,\n    };\n  }\n}\n\nmodule.exports = RichValueStore;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,cAAc,CAAC;EACnBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,iBAAiB,GAAG,IAAIC,GAAG,CAAC,CAAC;IAClC,IAAI,CAACC,IAAI,GAAG,EAAE;IACd,IAAI,CAACC,MAAM,GAAG,EAAE;IAChB,IAAI,CAACC,aAAa,GAAG,EAAE;EACzB;EAEAC,aAAaA,CAACC,OAAO,EAAE;IACrB,IAAIC,QAAQ,GAAG,IAAI,CAACP,iBAAiB,CAACQ,GAAG,CAACF,OAAO,CAAC;IAClD,IAAIC,QAAQ,KAAKE,SAAS,EAAE;MAC1BF,QAAQ,GAAG,IAAI,CAACL,IAAI,CAACQ,MAAM;MAC3B,IAAI,CAACR,IAAI,CAACS,IAAI,CAAC;QAACL;MAAO,CAAC,CAAC;MACzB,IAAI,CAACN,iBAAiB,CAACY,GAAG,CAACN,OAAO,EAAEC,QAAQ,CAAC;IAC/C;IAEA,MAAMM,OAAO,GAAG,IAAI,CAACV,MAAM,CAACO,MAAM;IAClC,IAAI,CAACP,MAAM,CAACQ,IAAI,CAAC;MAACJ,QAAQ;MAAEO,UAAU,EAAE;IAAC,CAAC,CAAC;IAE3C,MAAMC,OAAO,GAAG,IAAI,CAACX,aAAa,CAACM,MAAM;IACzC,IAAI,CAACN,aAAa,CAACO,IAAI,CAAC;MAACE;IAAO,CAAC,CAAC;IAElC,OAAO;MAACG,EAAE,EAAED,OAAO,GAAG;IAAC,CAAC;EAC1B;EAEA,IAAIE,KAAKA,CAAA,EAAG;IACV,OAAO;MACLf,IAAI,EAAE,IAAI,CAACA,IAAI;MACfC,MAAM,EAAE,IAAI,CAACA,MAAM;MACnBC,aAAa,EAAE,IAAI,CAACA;IACtB,CAAC;EACH;AACF;AAEAc,MAAM,CAACC,OAAO,GAAGrB,cAAc","ignoreList":[]}